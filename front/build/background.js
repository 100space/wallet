(()=>{"use strict";let e=setInterval((()=>{console.log("window object is available!"),clearInterval(e),window&&(chrome.runtime.onInstalled.addListener((e=>{"install"===e.reason?console.log("\ud655\uc7a5 \ud504\ub85c\uadf8\ub7a8\uc774 \uc124\uce58\ub418\uc5c8\uc2b5\ub2c8\ub2e4."):"update"===e.reason&&console.log("\ud655\uc7a5 \ud504\ub85c\uadf8\ub7a8\uc774 \uc0c8\ub85c\uace0\uce6d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")})),chrome.runtime.onMessage.addListener(((e,o,t)=>{console.log("event\uc5d0\uc11c \ubcf4\ub0b4\ub294 \uba54\uc2dc\uc9c0 \uc218\uc2e0:",e);const{type:s,method:n,params:a}=e;return"req"!==s||"eth_sendTransaction"!==n&&"eth_sendRawTransaction"!==n||(console.log("\ud31d\uc5c5 \ub6f0\uc6b8 \ub54c !!:",s,n,a),chrome.windows.create({url:chrome.runtime.getURL("approve.html"),type:"popup",width:400,height:750},(e=>{const o=e.tabs[0].id,t=(e,s,r)=>{e===o&&"complete"===s.status&&(chrome.tabs.sendMessage(e,{type:n,params:a}),chrome.tabs.onUpdated.removeListener(t))};chrome.tabs.onUpdated.addListener(t)}))),window.postMessage({type:s,method:n,params:a},"*"),window.addEventListener("message",(e=>{if(e.source!==window)return;const{type:o,id:s,response:n}=e.data;console.log("external\uc5d0\uc11c background\ub85c \ubc18\ud658\uac12:",o,s,n),"res"===o&&n&&(console.log(e.data),console.log("external\uc5d0\uc11c \uc628 \ub2f5\uc7a5:",o,s,n),t({type:"res",id:s,response:n}))})),!0})))}),1e3)})();
//# sourceMappingURL=background.js.map